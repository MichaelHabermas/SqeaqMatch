{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\super\\\\Documents\\\\michaelthegreat\\\\speaq_match\\\\app\\\\screens\\\\GamePlayScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { connect } from \"react-redux\";\nimport CardsContainer from \"../components/CardsContainer\";\nimport Screen from \"../components/Screen\";\nimport ScreenHeader from \"../components/ScreenHeader\";\nimport SpeechBubble from \"../components/SpeechBubble\";\nimport StreakTracker from \"../components/StreakTracker\";\nimport { deckShuffle } from \"../gameLogic\";\nimport { characters, decks, levels } from \"../test_data\";\nvar initialCardText = {\n  pre: \"\",\n  post: \"\",\n  cardText: \"\",\n  unchosen: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n  currentCardIdx: Math.floor(Math.random() * 12)\n};\n\nfunction GamePlayScreen(_ref) {\n  var gameState = _ref.gameState,\n      navigation = _ref.navigation;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      streak = _useState2[0],\n      setStreak = _useState2[1];\n\n  var _useState3 = useState({\n    level: gameState.gameSettings.currentLevel,\n    language: gameState.gameSettings.languageToLearn,\n    deckName: gameState.gameSettings.currentDeckName,\n    deck: gameState.gameSettings.currentDeck\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentGameSettings = _useState4[0],\n      setCurrentGameSettings = _useState4[1];\n\n  var _useState5 = useState({\n    pre: levels[currentGameSettings.level].languages[currentGameSettings.language].pre,\n    post: levels[currentGameSettings.level].languages[currentGameSettings.language].post,\n    cardText: \"\",\n    unchosen: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n    currentCardIdx: Math.floor(Math.random() * 12)\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentCardText = _useState6[0],\n      setCurrentCardText = _useState6[1];\n\n  useEffect(function () {\n    resetStreak();\n  }, []);\n\n  var cardIdxRandomizer = function cardIdxRandomizer() {\n    return Math.floor(Math.random() * currentCardText.unchosen.length);\n  };\n\n  var resetStreak = function resetStreak() {\n    var randomCardIdx = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11][cardIdxRandomizer()];\n    setCurrentCardText({\n      pre: levels[currentGameSettings.level].languages[currentGameSettings.language].pre,\n      post: levels[currentGameSettings.level].languages[currentGameSettings.language].post,\n      cardText: decks[currentGameSettings.deckName].deck[randomCardIdx].languages[currentGameSettings.language],\n      unchosen: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].filter(function (num) {\n        return num != randomCardIdx;\n      })\n    });\n    var shuffledDeck = deckShuffle(decks[currentGameSettings.deckName].deck);\n    setCurrentGameSettings(_objectSpread(_objectSpread({}, currentGameSettings), {}, {\n      deck: shuffledDeck\n    }));\n    setStreak(0);\n  };\n\n  var handleCardTap = function handleCardTap(cardText) {\n    if (streak >= 12) return;\n\n    if (cardText === currentCardText.cardText) {\n      if (streak >= 11) {\n        setTimeout(function () {\n          navigation.navigate(\"GameOver\");\n          resetStreak();\n        }, 1000);\n      } else {\n        var randomCardIdx = currentCardText.unchosen[cardIdxRandomizer()];\n        setCurrentCardText(_objectSpread(_objectSpread({}, currentCardText), {}, {\n          cardText: decks[currentGameSettings.deckName].deck[randomCardIdx].languages[currentGameSettings.language],\n          unchosen: currentCardText.unchosen.filter(function (num) {\n            return num != randomCardIdx;\n          })\n        }));\n        setStreak(streak + 1);\n      }\n    } else {\n      resetStreak();\n    }\n  };\n\n  if (!characters || !decks || !levels) {\n    return React.createElement(View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 4\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 5\n      }\n    }, \"Loading...\"));\n  }\n\n  return React.createElement(Screen, {\n    style: styles.screen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 3\n    }\n  }, React.createElement(ScreenHeader, {\n    navLeft: function navLeft() {\n      return navigation.navigate(\"Options\");\n    },\n    navLeftIcon: require(\"../assets/buttons/options_icon_light.png\"),\n    navRight: function navRight() {\n      return navigation.navigate(\"Help\");\n    },\n    navRightIcon: require(\"../assets/buttons/help_icon_light.png\"),\n    showTitle: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }\n  }), React.createElement(StreakTracker, {\n    streak: streak,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 4\n    }\n  }), React.createElement(CardsContainer, {\n    language: currentGameSettings.language,\n    handleCardTap: handleCardTap,\n    deck: decks[currentGameSettings.deckName].deck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 4\n    }\n  }), React.createElement(SpeechBubble, {\n    character: characters[1],\n    text: \"\" + currentCardText.pre + currentCardText.cardText + currentCardText.post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 4\n    }\n  }));\n}\n\nvar styles = StyleSheet.create({});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    gameState: state.matchAndMemory\n  };\n};\n\nexport default connect(mapStateToProps)(GamePlayScreen);","map":{"version":3,"sources":["C:/Users/super/Documents/michaelthegreat/speaq_match/app/screens/GamePlayScreen.js"],"names":["React","useEffect","useState","connect","CardsContainer","Screen","ScreenHeader","SpeechBubble","StreakTracker","deckShuffle","characters","decks","levels","initialCardText","pre","post","cardText","unchosen","currentCardIdx","Math","floor","random","GamePlayScreen","gameState","navigation","streak","setStreak","level","gameSettings","currentLevel","language","languageToLearn","deckName","currentDeckName","deck","currentDeck","currentGameSettings","setCurrentGameSettings","languages","currentCardText","setCurrentCardText","resetStreak","cardIdxRandomizer","length","randomCardIdx","filter","num","shuffledDeck","handleCardTap","setTimeout","navigate","styles","screen","require","StyleSheet","create","mapStateToProps","state","matchAndMemory"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { StyleSheet, View } from \"react-native\";\r\n\r\n// redux\r\nimport { connect } from \"react-redux\";\r\n\r\n// components\r\nimport CardsContainer from \"../components/CardsContainer\";\r\nimport Screen from \"../components/Screen\";\r\nimport ScreenHeader from \"../components/ScreenHeader\";\r\nimport SpeechBubble from \"../components/SpeechBubble\";\r\nimport StreakTracker from \"../components/StreakTracker\";\r\n\r\n// logic\r\nimport { deckShuffle } from \"../gameLogic\";\r\n\r\n// TODO: get this from the server/dynamically\r\nimport { characters, decks, levels } from \"../test_data\";\r\nconst initialCardText = {\r\n\tpre: \"\",\r\n\tpost: \"\",\r\n\tcardText: \"\",\r\n\tunchosen: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\r\n\tcurrentCardIdx: Math.floor(Math.random() * 12),\r\n};\r\n\r\nfunction GamePlayScreen({ gameState, navigation }) {\r\n\tconst [streak, setStreak] = useState(0);\r\n\tconst [currentGameSettings, setCurrentGameSettings] = useState({\r\n\t\tlevel: gameState.gameSettings.currentLevel,\r\n\t\tlanguage: gameState.gameSettings.languageToLearn,\r\n\t\tdeckName: gameState.gameSettings.currentDeckName,\r\n\t\tdeck: gameState.gameSettings.currentDeck,\r\n\t});\r\n\tconst [currentCardText, setCurrentCardText] = useState({\r\n\t\tpre: levels[currentGameSettings.level].languages[\r\n\t\t\tcurrentGameSettings.language\r\n\t\t].pre,\r\n\t\tpost: levels[currentGameSettings.level].languages[\r\n\t\t\tcurrentGameSettings.language\r\n\t\t].post,\r\n\t\tcardText: \"\",\r\n\t\tunchosen: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\r\n\t\tcurrentCardIdx: Math.floor(Math.random() * 12),\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tresetStreak();\r\n\t}, []);\r\n\r\n\tconst cardIdxRandomizer = () =>\r\n\t\tMath.floor(Math.random() * currentCardText.unchosen.length);\r\n\r\n\tconst resetStreak = () => {\r\n\t\tconst randomCardIdx = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11][\r\n\t\t\tcardIdxRandomizer()\r\n\t\t];\r\n\t\tsetCurrentCardText({\r\n\t\t\tpre: levels[currentGameSettings.level].languages[\r\n\t\t\t\tcurrentGameSettings.language\r\n\t\t\t].pre,\r\n\t\t\tpost: levels[currentGameSettings.level].languages[\r\n\t\t\t\tcurrentGameSettings.language\r\n\t\t\t].post,\r\n\t\t\tcardText:\r\n\t\t\t\tdecks[currentGameSettings.deckName].deck[randomCardIdx].languages[\r\n\t\t\t\t\tcurrentGameSettings.language\r\n\t\t\t\t],\r\n\t\t\tunchosen: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].filter(\r\n\t\t\t\tnum => num != randomCardIdx\r\n\t\t\t),\r\n\t\t});\r\n\t\tconst shuffledDeck = deckShuffle(decks[currentGameSettings.deckName].deck);\r\n\t\tsetCurrentGameSettings({ ...currentGameSettings, deck: shuffledDeck });\r\n\t\tsetStreak(0);\r\n\t};\r\n\r\n\tconst handleCardTap = cardText => {\r\n\t\t// prevent over-selecting on game over\r\n\t\tif (streak >= 12) return;\r\n\t\tif (cardText === currentCardText.cardText) {\r\n\t\t\t// game over condition\r\n\t\t\tif (streak >= 11) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnavigation.navigate(\"GameOver\");\r\n\t\t\t\t\tresetStreak();\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tconst randomCardIdx = currentCardText.unchosen[cardIdxRandomizer()];\r\n\t\t\t\tsetCurrentCardText({\r\n\t\t\t\t\t...currentCardText,\r\n\t\t\t\t\tcardText:\r\n\t\t\t\t\t\tdecks[currentGameSettings.deckName].deck[randomCardIdx].languages[\r\n\t\t\t\t\t\t\tcurrentGameSettings.language\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\tunchosen: currentCardText.unchosen.filter(\r\n\t\t\t\t\t\tnum => num != randomCardIdx\r\n\t\t\t\t\t),\r\n\t\t\t\t});\r\n\t\t\t\tsetStreak(streak + 1);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresetStreak();\r\n\t\t}\r\n\t};\r\n\r\n\t// TODO: need a better loading mechanism\r\n\tif (!characters || !decks || !levels) {\r\n\t\treturn (\r\n\t\t\t<View>\r\n\t\t\t\t<Text>Loading...</Text>\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Screen style={styles.screen}>\r\n\t\t\t<ScreenHeader\r\n\t\t\t\tnavLeft={() => navigation.navigate(\"Options\")}\r\n\t\t\t\tnavLeftIcon={require(\"../assets/buttons/options_icon_light.png\")}\r\n\t\t\t\tnavRight={() => navigation.navigate(\"Help\")}\r\n\t\t\t\tnavRightIcon={require(\"../assets/buttons/help_icon_light.png\")}\r\n\t\t\t\tshowTitle={false}\r\n\t\t\t/>\r\n\r\n\t\t\t<StreakTracker streak={streak} />\r\n\r\n\t\t\t<CardsContainer\r\n\t\t\t\tlanguage={currentGameSettings.language}\r\n\t\t\t\thandleCardTap={handleCardTap}\r\n\t\t\t\tdeck={decks[currentGameSettings.deckName].deck}\r\n\t\t\t/>\r\n\r\n\t\t\t<SpeechBubble\r\n\t\t\t\tcharacter={characters[1]}\r\n\t\t\t\ttext={`${currentCardText.pre}${currentCardText.cardText}${currentCardText.post}`}\r\n\t\t\t/>\r\n\t\t</Screen>\r\n\t);\r\n}\r\n\r\nconst styles = StyleSheet.create({});\r\n\r\nconst mapStateToProps = state => ({\r\n\tgameState: state.matchAndMemory,\r\n});\r\n\r\nexport default connect(mapStateToProps)(GamePlayScreen);\r\n"]},"metadata":{},"sourceType":"module"}